<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Code Showcase</title>

  <!-- Prism.js CSS for syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css">
  <link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css">
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      max-width: 900px;
      margin: auto;
      background-color: #fdfdfd;
    }

    h1 {
      text-align: center;
    }

    pre {
      border-radius: 8px;
      padding: 1rem;
      background: #f5f5f5;
      overflow-x: auto;
      margin: 0.5rem 0;
    }

    ul {
      list-style-type: none;
      padding-left: 0;
    }

    li {
      margin-bottom: 1rem;
    }

    summary {
      font-weight: bold;
      cursor: pointer;
      padding: 0.5rem;
      background-color: #eee;
      border-radius: 4px;
    }

    summary:hover {
      background-color: #ddd;
    }

    .error {
      color: red;
    }
  </style>
</head>

<body>
  <h1>Project Showcase</h1>

  <!-- Static project links -->
  <ul>
    <li><a href="programmer-of-time/">programmer-of-time</a></li>
    <li><a href="drag-the-tone/dist/">drag-the-tone</a></li>
  </ul>

  <!-- Container for GitHub files -->
  <ol id="code-container">Code Showcase</ol>

  <!-- Prism.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>
  <script>
    const owner = 'Coderlogy'; // your GitHub username
    const repo = 'Programming-11-12-course'; // your repo name
    const folder = 'files'; // folder with code files

    const container = document.getElementById('code-container');

    async function loadFiles() {
      try {
        const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${folder}`);
        if (!res.ok) throw new Error(`GitHub API error: ${res.status}`);
        const files = await res.json();

        if (!Array.isArray(files) || files.length === 0) {
          container.innerHTML = '<li class="error">No files found in the folder.</li>';
          return;
        }

        for (const file of files) {
          if (file.type !== 'file') continue;

          const li = document.createElement('li');

          // Create collapsible details/summary
          const details = document.createElement('details');
          const summary = document.createElement('summary');
          summary.textContent = file.name;
          details.appendChild(summary);

          // Code block
          const pre = document.createElement('pre');
          pre.classList.add('line-numbers');
          const code = document.createElement('code');

          const ext = file.name.split('.').pop();
          code.className = {
            py: 'language-python',
            js: 'language-javascript',
            html: 'language-markup'
          }[ext] || 'language-none';

          // Fetch raw content
          const rawRes = await fetch(file.download_url);
          const text = await rawRes.text();
          code.textContent = text;

          pre.appendChild(code);
          details.appendChild(pre);
          li.appendChild(details);
          container.appendChild(li);

          Prism.highlightElement(code);
        }
      } catch (err) {
        console.error(err);
        container.innerHTML = `<li class="error">Failed to load files. Check console for details.</li>`;
      }
    }

    // Start loading
    loadFiles();
  </script>

</body>

</html>