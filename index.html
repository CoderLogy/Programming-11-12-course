<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Code Showcase</title>

  <!-- Prism.js CSS for syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">

  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      max-width: 900px;
      margin: auto;
      background-color: #fdfdfd;
    }

    h1 {
      text-align: center;
    }

    pre {
      border-radius: 8px;
      padding: 1rem;
      background: #f5f5f5;
      overflow-x: auto;
      margin-bottom: 2rem;
    }

    h2 {
      margin-top: 2rem;
      font-size: 1.2rem;
    }

    .file-section {
      border-bottom: 1px solid #ddd;
      padding-bottom: 1rem;
      margin-bottom: 1rem;
    }

    .error {
      color: red;
    }
  </style>
</head>

<body>
  <h1>Showcase</h1>
  <ul>
    <li><a href="programmer-of-time/">programmer-of-time</a></li>
    <li><a href="drag-the-tone/dist/">drag-the-tone</a></li>
  </ul>
  
  <div id="code-container"></div>

  <!-- Prism.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>

  <script>
    const owner = 'Coderlogy'; // your GitHub username
    const repo = 'Programming-11-12-course'; // your repo name
    const folder = 'files'; // folder with code files

    const container = document.getElementById('code-container');

    async function loadFiles() {
      try {
        const res = await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${folder}`);
        if (!res.ok) throw new Error(`GitHub API error: ${res.status}`);
        const files = await res.json();

        if (!Array.isArray(files) || files.length === 0) {
          container.innerHTML = '<p class="error">No files found in the folder.</p>';
          return;
        }

        for (const file of files) {
          if (file.type !== 'file') continue;

          const section = document.createElement('div');
          section.className = 'file-section';

          // File name
          const h2 = document.createElement('h2');
          h2.textContent = file.name;
          section.appendChild(h2);

          // Code block
          const pre = document.createElement('pre');
          const code = document.createElement('code');

          const ext = file.name.split('.').pop();
          code.className = {
            py: 'language-python',
            js: 'language-javascript',
            html: 'language-markup'
          }[ext] || 'language-none';

          // Fetch raw content
          const rawRes = await fetch(file.download_url);
          const text = await rawRes.text();
          code.textContent = text;

          pre.appendChild(code);
          section.appendChild(pre);
          container.appendChild(section);

          Prism.highlightElement(code);
        }
      } catch (err) {
        console.error(err);
        container.innerHTML = `<p class="error">Failed to load files. Check console for details.</p>`;
      }
    }

    // Start loading
    loadFiles();
  </script>

</body>

</html>
</body></html>
